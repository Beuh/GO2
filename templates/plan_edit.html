{% import 'plan_icon.html' as plan_icon %}
{% macro plan_edit(plan, section_info, show_date=False, show_member=False, show_band=False, show_gig_name=False, show_section=True) -%}
<tr>
    <td width=10%>
        {{ plan_icon.icon_button(plan) }}
    </td>
    {% if show_date %}
        <td class="plan-cell" width="20%">
            {{ plan.key.parent().get().date|e }}
        </td>
    {% endif %}
    {% if show_member %}
        <td class="plan-cell" width="20%">
             <a href='/member_info.html?mk={{plan.member.urlsafe()}}'>{{ plan.member.get().name }}</a>
        </td>
    {% endif %}
    {% if show_band %}
        <td class="plan-cell" width="20%">
            <a href="band_info.html?bk={{ plan.key.parent().get().key.parent().urlsafe()}}">
             {{ plan.key.parent().get().key.parent().get().name|e }}</a>
        </td>
    {% endif %}
    {% if show_gig_name %}
        <td class="plan-cell">
            <a href="gig_info.html?gk={{ plan.key.parent().urlsafe() }}" >{{ plan.key.parent().get().title|e }}</a>
        </td>
    {% endif %}
    <td>
        <div class="form-group plan-comment-input">
            <input type="text" id="c-{{plan.key.urlsafe()}}" class="form-control" placeholder="{{plan.comment}}" onchange="update_comment('{{plan.key.urlsafe()}}')">
        </div>
    </td>
    {% if show_section %}
        <td class="plan-cell">
            {% set section_list = section_info[plan.key.parent().parent()] %}
            {% if section_list and section_list|length > 1 %}
                <select id="sel-{{plan.key.urlsafe()}}" onchange="option_select('{{plan.key.urlsafe()}}')">
                {% for section in section_list %}
                    <option
                        {% if section == plan.section %}
                            selected
                        {% endif %}
                        id="{{section.urlsafe()}}"
                    >{{ section.get().name }}</option>
                {% endfor %}
                </select>
            {% endif %}
        </td>
    {% endif %}
</tr>
{%- endmacro %}
